<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                template="/WEB-INF/template.xhtml">

    <ui:define name="title">Liberação Acesso</ui:define>
    <ui:define name="content"> 
        <script type="text/javascript">
            function start() {
                PF('startButton1').disable();

                window['progress'] = setInterval(function () {
                    var pbClient = PF('pbClient'),
                            oldValue = pbClient.getValue(),
                            newValue = oldValue + 10;

                    pbClient.setValue(pbClient.getValue() + 10);

                    if (newValue === 100) {
                        clearInterval(window['progress']);
                        
                    }


                }, 1300);
                
            }

            function cancel() {
                clearInterval(window['progress']);
                PF('pbClient').setValue(0);
                PF('startButton1').enable();
            }
//progressbar
            setTimeout(function () {

                $('.bar').each(function () {
                    var me = $(this);
                    var perc = me.attr("data-percentage");

                    //TODO: left and right text handling

                    var current_perc = 0;

                    var progress = setInterval(function () {
                        if (current_perc >= perc) {
                            clearInterval(progress);
                        } else {
                            current_perc += 1;
                            me.css('width', (current_perc) + '%');
                        }

                        me.text((current_perc) + '%');
                         if (current_perc === 100) {
                        window.location.href = "http://www.usinacerradao.com.br/";    
                    }

                    }, 100);              
                });

            }, 300);

        </script>

        <h1>#{acessoMB.user}</h1>
        <div class="card">
            <h1>Por favor, aguarde!!!</h1>
            
            <div class="progress progress-success">
                <div class="bar" style="float: left; width: 0%; " data-percentage="100"></div>
            </div>

        </div>

    </ui:define>  

</ui:composition>